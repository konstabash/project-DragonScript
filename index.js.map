{"version":3,"file":"index.js","sources":["../src/js/faq.js","../src/img/sprite.svg#icon-error","../src/js/footer.js"],"sourcesContent":["import Accordion from 'accordion-js';\nimport 'accordion-js/dist/accordion.min.css';\ndocument.addEventListener('DOMContentLoaded', () => {\n  new Accordion('.accordion-container', {\n    duration: 400,\n    showMultiple: false,\n  });\n});\n","export default \"__VITE_ASSET__GcBWLkSN__$_#icon-error__\"","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconError from '/img/sprite.svg#icon-error';\n\naxios.defaults.baseURL = 'https://portfolio-js.b.goit.study/api';\n\nconst refs = {\n  userEmail: document.querySelector('[name=\"email\"]'),\n  userComment: document.querySelector('[name=\"comment\"]'),\n  form: document.querySelector('.footer-form'),\n  crossBtn: document.querySelector('.modal-close-btn'),\n  modal: document.querySelector('.backdrop'),\n  isValidMessage: document.querySelector('.form-error-message'),\n};\nconst regex = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n\nconst errorObj = {\n  position: 'topRight',\n  message: 'An error occurred while processing your request. Please try again.',\n  messageColor: '#fafafb',\n  messageSize: '16px',\n  backgroundColor: '#ed3b44',\n  iconUrl: iconError,\n};\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.userEmail.addEventListener('blur', blurEmailHandler);\nrefs.userComment.addEventListener('blur', blurCommentHandler);\nrefs.modal.addEventListener('click', closeModal);\nrefs.crossBtn.addEventListener('click', toggleModal);\n\nrefs.userEmail.addEventListener('input', e => {\n  e.currentTarget.style.borderBottomColor = 'rgba(250, 250, 250, 0.5)';\n  refs.isValidMessage.textContent = '';\n});\nrefs.userComment.addEventListener(\n  'input',\n  e => (e.currentTarget.style.borderBottomColor = 'rgba(250, 250, 250, 0.5)')\n);\ndocument.addEventListener('keydown', e => {\n  if (e.code === 'Escape') {\n    refs.modal.classList.remove('is-open');\n    document.body.style.overflow = '';\n  }\n});\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  if (refs.userEmail.dataset.state === 'error') {\n    return;\n  }\n  refs.isValidMessage.textContent = '';\n  refs.userEmail.style.borderBottomColor = 'rgba(250, 250, 250, 0.2)';\n  refs.userComment.style.borderBottomColor = 'rgba(250, 250, 250, 0.2)';\n  const inputs = e.currentTarget.elements;\n  const user = {\n    email: inputs[0].value.trim(),\n    comment: inputs[1].value.trim(),\n  };\n  if (user.comment === '') {\n    return;\n  }\n  try {\n    await sendRequest(user);\n    e.target.reset();\n    toggleModal();\n    document.body.style.overflow = 'hidden';\n  } catch {\n    iziToast.error(errorObj);\n    return;\n  }\n}\n\nasync function sendRequest(user) {\n  const { data } = await axios.post('/requests', user);\n  return data;\n}\n\nfunction showErrorMessage(e) {\n  const errorColor = '#e74a3b';\n  refs.isValidMessage.textContent = 'Invalid email, try again';\n  refs.isValidMessage.style.color = errorColor;\n  e.currentTarget.style.borderBottomColor = errorColor;\n  refs.isValidMessage.style.marginTop = '4px';\n}\n\nfunction showSuccessMessage(e) {\n  const successColor = '#3cbc81';\n  refs.isValidMessage.textContent = 'Success!';\n  refs.isValidMessage.style.color = successColor;\n  e.currentTarget.style.borderBottomColor = successColor;\n  refs.isValidMessage.style.marginTop = '4px';\n}\n\nfunction blurEmailHandler(e) {\n  const userEmail = e.currentTarget.value.trim();\n  if (userEmail === '') {\n    refs.isValidMessage.textContent = '';\n    e.currentTarget.style.borderBottomColor = 'rgba(250, 250, 250, 0.2)';\n    return;\n  }\n  const isValid = regex.test(userEmail);\n  if (isValid) {\n    showSuccessMessage(e);\n    e.currentTarget.dataset.state = 'success';\n  } else {\n    showErrorMessage(e);\n    e.currentTarget.dataset.state = 'error';\n  }\n}\n\nfunction blurCommentHandler(e) {\n  const userComment = e.currentTarget.value.trim();\n  if (userComment === '') {\n    e.currentTarget.style.borderBottomColor = 'rgba(250, 250, 250, 0.2)';\n    return;\n  }\n}\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-open');\n  document.body.style.overflow = '';\n}\n\nfunction closeModal(e) {\n  if (e.currentTarget !== e.target) {\n    return;\n  }\n  refs.modal.classList.remove('is-open');\n  document.body.style.overflow = '';\n}\n"],"names":["Accordion","iconError","axios","refs","regex","errorObj","onSubmit","blurEmailHandler","blurCommentHandler","closeModal","toggleModal","inputs","user","sendRequest","iziToast","data","showErrorMessage","errorColor","showSuccessMessage","successColor","userEmail"],"mappings":"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"}